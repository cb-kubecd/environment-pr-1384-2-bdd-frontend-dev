
Showing logs for build [32mcb-kubecd-environment-pr-1384-2-5lfxh-1[0m stage [32mrelease[0m and container [32mstep-credential-initializer-6zjc6[0m
{"level":"warn","ts":1585924961.6428094,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/0.8.0-**-support-backwards-incompats\" is not a valid GitHub commit ID"}
{"level":"info","ts":1585924961.6435792,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mcb-kubecd-environment-pr-1384-2-5lfxh-1[0m stage [32mrelease[0m and container [32mstep-working-dir-initializer-mqjz2[0m
{"level":"warn","ts":1585924963.0540857,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1585924963.05582,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mcb-kubecd-environment-pr-1384-2-5lfxh-1[0m stage [32mrelease[0m and container [32mstep-place-tools[0m

Showing logs for build [32mcb-kubecd-environment-pr-1384-2-5lfxh-1[0m stage [32mrelease[0m and container [32mstep-git-source-cb-kubecd-environment-pr-1384-2-5lfxh-jxfr6[0m
{"level":"warn","ts":1585924999.165583,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/0.8.0-**-support-backwards-incompats\" is not a valid GitHub commit ID"}
{"level":"info","ts":1585925000.3740656,"logger":"fallback-logger","caller":"git/git.go:103","msg":"Successfully cloned https://github.com/cb-kubecd/environment-pr-1384-2-bdd-frontend-dev.git @ v0.0.1 in path /workspace/source"}

Showing logs for build [32mcb-kubecd-environment-pr-1384-2-5lfxh-1[0m stage [32mrelease[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:5a744f85fbe50515f04d8d98c77fbeef379cdeae
WARNING: no SHAs to merge, falling back to initial cloned commit

Showing logs for build [32mcb-kubecd-environment-pr-1384-2-5lfxh-1[0m stage [32mrelease[0m and container [32mstep-validate-git[0m
Git configured for user: jenkins-x-bot and email jenkins-x@googlegroups.com

Showing logs for build [32mcb-kubecd-environment-pr-1384-2-5lfxh-1[0m stage [32mrelease[0m and container [32mstep-verify-preinstall[0m
no need to reconnect to cluster
WARNING: Vault is enabled and TLS is not enabled. This means your secrets will be sent to and from your cluster in the clear. See https://jenkins-x.io/docs/getting-started/setup/boot/#ingress for more information
WARNING: TLS is not enabled so your webhooks will be called using HTTP. This means your webhook secret will be sent to your cluster in the clear. See https://jenkins-x.io/docs/getting-started/setup/boot/#ingress for more information
Verifying the kubernetes cluster before we try to boot Jenkins X in namespace: **
Trying to lazily create any missing resources to get the current cluster ready to boot Jenkins X
Verifying Ingress...
Clearing the domain 35.189.212.12.nip.io as when using auto-DNS domains we need to regenerate to ensure its always accurate in case the cluster or ingress service is recreated

Using namespace '**' from context named '' on server ''.

Verifying the CLI packages using version stream URL: https://github.com/jenkins-x/jenkins-x-versions.git and git ref: v1.0.410
using version 2.0.1263 of **
CLI packages kubectl, git, helm seem to be setup correctly
NAME               VERSION
**                 2.0.1263
Kubernetes cluster v1.14.10-gke.27
kubectl            v1.16.0
helm client        2.14.3
git                2.21.1

Verifying Storage...
WARNING: No URL provided for storage: logs
WARNING: No URL provided for storage: reports
WARNING: No URL provided for storage: repository
WARNING: Your requirements have not enabled cloud storage for backup - we recommend enabling this for kubernetes provider gke
Storage configuration looks good

Helm installed and configured
Ensuring Helm chart repository https://storage.googleapis.com/chartmuseum.jenkins-x.io is configured
Validating Kaniko secret in namespace **

Cluster looks good, you are ready to '** boot' now!


Showing logs for build [32mcb-kubecd-environment-pr-1384-2-5lfxh-1[0m stage [32mrelease[0m and container [32mstep-install-jx-crds[0m
Jenkins X CRDs upgraded with success

Showing logs for build [32mcb-kubecd-environment-pr-1384-2-5lfxh-1[0m stage [32mrelease[0m and container [32mstep-install-velero[0m
Modified file /workspace/source/systems/velero/Chart.yaml to set the chart to version 1
Verifying the helm requirements versions in dir: . using version stream URL: https://github.com/jenkins-x/jenkins-x-versions.git and git ref: v1.0.410

Showing logs for build [32mcb-kubecd-environment-pr-1384-2-5lfxh-1[0m stage [32mrelease[0m and container [32mstep-install-velero-backups[0m
Modified file /workspace/source/systems/velero-backups/Chart.yaml to set the chart to version 1
Ignoring templates/default-backup.yaml
No requirements file: /tmp/**-helm-apply-365017560/velero-backups/requirements.yaml so not checking for missing versions

Showing logs for build [32mcb-kubecd-environment-pr-1384-2-5lfxh-1[0m stage [32mrelease[0m and container [32mstep-install-nginx-controller[0m
Modified file /workspace/source/systems/**ing/Chart.yaml to set the chart to version 1
Verifying the helm requirements versions in dir: . using version stream URL: https://github.com/jenkins-x/jenkins-x-versions.git and git ref: v1.0.410
error: upgrading helm chart '.': failed to run 'kubectl apply --recursive -f /tmp/helm-template-workdir-007181310/**ing/output/namespaces/kube-system -l jenkins.io/chart-release=**ing --namespace kube-system --wait --validate=false' command in directory '/tmp/**-helm-apply-546001537/**ing', output: 'clusterrole.rbac.authorization.k8s.io/**ing-nginx-ingress configured
clusterrolebinding.rbac.authorization.k8s.io/**ing-nginx-ingress configured
configmap/**ing-nginx-ingress-controller created
deployment.extensions/**ing-nginx-ingress-controller configured
poddisruptionbudget.policy/**ing-nginx-ingress-controller configured
deployment.extensions/**ing-nginx-ingress-default-backend configured
role.rbac.authorization.k8s.io/**ing-nginx-ingress configured
rolebinding.rbac.authorization.k8s.io/**ing-nginx-ingress configured
serviceaccount/**ing-nginx-ingress configured
Error from server (Invalid): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"annotations\":{\"jenkins.io/chart\":\"**ing\"},\"labels\":{\"app\":\"nginx-ingress\",\"chart\":\"nginx-ingress-1.3.1\",\"component\":\"controller\",\"heritage\":\"Tiller\",\"jenkins.io/chart-release\":\"**ing\",\"jenkins.io/namespace\":\"kube-system\",\"jenkins.io/version\":\"1\",\"release\":\"**ing\"},\"name\":\"**ing-nginx-ingress-controller\",\"namespace\":\"kube-system\"},\"spec\":{\"clusterIP\":\"\",\"ports\":[{\"name\":\"http\",\"port\":80,\"protocol\":\"TCP\",\"targetPort\":\"http\"},{\"name\":\"https\",\"port\":443,\"protocol\":\"TCP\",\"targetPort\":\"https\"}],\"selector\":{\"app\":\"nginx-ingress\",\"component\":\"controller\",\"release\":\"**ing\"},\"type\":\"LoadBalancer\"}}\n"},"labels":{"chart":"nginx-ingress-1.3.1"}},"spec":{"clusterIP":"","selector":{"app.kubernetes.io/component":null,"component":"controller"}}}
to:
Resource: "/v1, Resource=services", GroupVersionKind: "/v1, Kind=Service"
Name: "**ing-nginx-ingress-controller", Namespace: "kube-system"
Object: &{map["apiVersion":"v1" "kind":"Service" "metadata":map["annotations":map["jenkins.io/chart":"**ing" "kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"annotations\":{\"jenkins.io/chart\":\"**ing\"},\"labels\":{\"app\":\"nginx-ingress\",\"chart\":\"nginx-ingress-1.34.2\",\"component\":\"controller\",\"heritage\":\"Tiller\",\"jenkins.io/chart-release\":\"**ing\",\"jenkins.io/namespace\":\"kube-system\",\"jenkins.io/version\":\"1\",\"release\":\"**ing\"},\"name\":\"**ing-nginx-ingress-controller\",\"namespace\":\"kube-system\"},\"spec\":{\"ports\":[{\"name\":\"http\",\"port\":80,\"protocol\":\"TCP\",\"targetPort\":\"http\"},{\"name\":\"https\",\"port\":443,\"protocol\":\"TCP\",\"targetPort\":\"https\"}],\"selector\":{\"app\":\"nginx-ingress\",\"app.kubernetes.io/component\":\"controller\",\"release\":\"**ing\"},\"type\":\"LoadBalancer\"}}\n"] "creationTimestamp":"2020-04-03T14:16:58Z" "labels":map["app":"nginx-ingress" "chart":"nginx-ingress-1.34.2" "component":"controller" "heritage":"Tiller" "jenkins.io/chart-release":"**ing" "jenkins.io/namespace":"kube-system" "jenkins.io/version":"1" "release":"**ing"] "name":"**ing-nginx-ingress-controller" "namespace":"kube-system" "resourceVersion":"1535" "selfLink":"/api/v1/namespaces/kube-system/services/**ing-nginx-ingress-controller" "uid":"c7bd9e3d-75b5-11ea-b2f4-42010a840002"] "spec":map["clusterIP":"10.83.246.16" "externalTrafficPolicy":"Cluster" "ports":[map["name":"http" "nodePort":'\u7e82' "port":'P' "protocol":"TCP" "targetPort":"http"] map["name":"https" "nodePort":'\u777a' "port":'\u01bb' "protocol":"TCP" "targetPort":"https"]] "selector":map["app":"nginx-ingress" "app.kubernetes.io/component":"controller" "release":"**ing"] "sessionAffinity":"None" "type":"LoadBalancer"] "status":map["loadBalancer":map["ingress":[map["ip":"35.189.212.12"]]]]]}
for: "/tmp/helm-template-workdir-007181310/**ing/output/namespaces/kube-system/**ing/charts/nginx-ingress/templates/part0-controller-service.yaml": Service "**ing-nginx-ingress-controller" is invalid: spec.clusterIP: Invalid value: "": field is immutable
Error from server (Invalid): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"annotations\":{\"jenkins.io/chart\":\"**ing\"},\"labels\":{\"app\":\"nginx-ingress\",\"chart\":\"nginx-ingress-1.3.1\",\"component\":\"default-backend\",\"heritage\":\"Tiller\",\"jenkins.io/chart-release\":\"**ing\",\"jenkins.io/namespace\":\"kube-system\",\"jenkins.io/version\":\"1\",\"release\":\"**ing\"},\"name\":\"**ing-nginx-ingress-default-backend\",\"namespace\":\"kube-system\"},\"spec\":{\"clusterIP\":\"\",\"ports\":[{\"name\":\"http\",\"port\":80,\"protocol\":\"TCP\",\"targetPort\":\"http\"}],\"selector\":{\"app\":\"nginx-ingress\",\"component\":\"default-backend\",\"release\":\"**ing\"},\"type\":\"ClusterIP\"}}\n"},"labels":{"chart":"nginx-ingress-1.3.1"}},"spec":{"clusterIP":"","selector":{"app.kubernetes.io/component":null,"component":"default-backend"}}}
to:
Resource: "/v1, Resource=services", GroupVersionKind: "/v1, Kind=Service"
Name: "**ing-nginx-ingress-default-backend", Namespace: "kube-system"
Object: &{map["apiVersion":"v1" "kind":"Service" "metadata":map["annotations":map["jenkins.io/chart":"**ing" "kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"annotations\":{\"jenkins.io/chart\":\"**ing\"},\"labels\":{\"app\":\"nginx-ingress\",\"chart\":\"nginx-ingress-1.34.2\",\"component\":\"default-backend\",\"heritage\":\"Tiller\",\"jenkins.io/chart-release\":\"**ing\",\"jenkins.io/namespace\":\"kube-system\",\"jenkins.io/version\":\"1\",\"release\":\"**ing\"},\"name\":\"**ing-nginx-ingress-default-backend\",\"namespace\":\"kube-system\"},\"spec\":{\"ports\":[{\"name\":\"http\",\"port\":80,\"protocol\":\"TCP\",\"targetPort\":\"http\"}],\"selector\":{\"app\":\"nginx-ingress\",\"app.kubernetes.io/component\":\"default-backend\",\"release\":\"**ing\"},\"type\":\"ClusterIP\"}}\n"] "creationTimestamp":"2020-04-03T14:16:59Z" "labels":map["app":"nginx-ingress" "chart":"nginx-ingress-1.34.2" "component":"default-backend" "heritage":"Tiller" "jenkins.io/chart-release":"**ing" "jenkins.io/namespace":"kube-system" "jenkins.io/version":"1" "release":"**ing"] "name":"**ing-nginx-ingress-default-backend" "namespace":"kube-system" "resourceVersion":"1279" "selfLink":"/api/v1/namespaces/kube-system/services/**ing-nginx-ingress-default-backend" "uid":"c7d8399a-75b5-11ea-b2f4-42010a840002"] "spec":map["clusterIP":"10.83.252.54" "ports":[map["name":"http" "port":'P' "protocol":"TCP" "targetPort":"http"]] "selector":map["app":"nginx-ingress" "app.kubernetes.io/component":"default-backend" "release":"**ing"] "sessionAffinity":"None" "type":"ClusterIP"] "status":map["loadBalancer":map[]]]}
for: "/tmp/helm-template-workdir-007181310/**ing/output/namespaces/kube-system/**ing/charts/nginx-ingress/templates/part0-default-backend-service.yaml": Service "**ing-nginx-ingress-default-backend" is invalid: spec.clusterIP: Invalid value: "": field is immutable'
[31m
Pipeline failed on stage 'release' : container 'step-install-nginx-controller'. The execution of the pipeline has stopped.[0m
